| Campo                    | Como calcular                                                                                                                                                                                                                                                                                                                                                                               |
| ------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `lecture_id`             | ID da aula (do Postgres `lecture.lecture_id`).                                                                                                                                                                                                                                                                                                                                              |
| `subject_id`             | ID da disciplina (do Postgres `lecture.subject_id`).                                                                                                                                                                                                                                                                                                                                        |
| `total_students`         | Número de `user_id` únicos na collection `traces` que tenham eventos relacionados à aula. Use regex para extrair `lecture_id` do `classTitle` dentro de colchetes `[]`.                                                                                                                                                                                                                     |
| `total_time_watched`     | `period_end - period_start` da aula (Postgres). Converter para minutos ou horas decimais, conforme definido.                                                                                                                                                                                                                                                                                |
| `avg_lecture_duration`   | Média de duração de todas as aulas da mesma disciplina (`subject_id`). Pode ser calculada com `AVG(period_end - period_start)` agrupando por `subject_id`.                                                                                                                                                                                                                                  |
| `min_lecture_duration`   | Duração mínima entre todas as aulas da mesma disciplina (`subject_id`). Calculada com `MIN(period_end - period_start)` agrupando por `subject_id`.                                                                                                                                                                                                                                          |
| `max_lecture_duration`   | Duração máxima entre todas as aulas da mesma disciplina (`subject_id`). Calculada com `MAX(period_end - period_start)` agrupando por `subject_id`.                                                                                                                                                                                                                                          |
| `avg_idle_duration`      | Média de tempo ocioso (em minutos) dos alunos em uma aula. É calculada com base na diferença entre o horário de `lectureTabLastAccessed` e o `timestamp` de cada evento registrado. Representa quanto tempo, em média, os alunos permaneceram inativos durante a aula.                                                                                                                      |
| `min_idle_duration`      | Tempo ocioso mínimo registrado (em minutos) entre os eventos de uma mesma aula, considerando `lectureTabLastAccessed - timestamp`.                                                                                                                                                                                                                                                          |
| `max_idle_duration`      | Tempo ocioso máximo registrado (em minutos) entre os eventos de uma mesma aula, considerando `lectureTabLastAccessed - timestamp`.                                                                                                                                                                                                                                                          |
| `avg_attention_span`     | Tempo médio de atenção dos alunos durante a aula, em minutos. Calculado como:<br> **`avg_attention_span = avg_watch_duration - avg_idle_duration`**<br> Onde:<br>• `avg_watch_duration = total_time_watched / total_students`<br>• `avg_idle_duration` é o tempo médio ocioso por aluno.<br> Representa o tempo médio em minutos em que os alunos estiveram efetivamente engajados na aula. |
| `min_attention_span`     | Tempo mínimo de atenção (em minutos) observado entre os alunos durante a aula. Calculado como: `min_attention_span = min_watch_duration - max_idle_duration`.                                                                                                                                                                                                                               |
| `max_attention_span`     | Tempo máximo de atenção (em minutos) observado entre os alunos durante a aula. Calculado como: `max_attention_span = max_watch_duration - min_idle_duration`.                                                                                                                                                                                                                               |
| `pct_enabled_camera`     | Percentual de usuários que ativaram a câmera durante a aula: `(num_users_com_camera / total_students) * 100`. Use `traces.event` com `onCamOn` ou equivalente, filtrando pelo `lecture_id` extraído dos colchetes.                                                                                                                                                                          |
| `pct_enabled_mic`        | Igual ao `pct_enabled_camera`, mas para microfone (`onMicOn` ou equivalente).                                                                                                                                                                                                                                                                                                               |
| `avg_cam_streaming_span` | Duração média do tempo em que a câmera permaneceu ligada (em minutos). *(não implementado no momento)*                                                                                                                                                                                                                                                                                      |
| `avg_mic_streaming_span` | Duração média do tempo em que o microfone permaneceu ligado (em minutos). *(não implementado no momento)*                                                                                                                                                                                                                                                                                   |
| `issued_at`              | Data/hora de emissão do relatório, formatada como `DD/MM/YYYY HH:mm`.                                                                                                                                                                                                                                                                                                                       |
